MODULE CommunicateModule
    
    VAR socketdev laser_socket;
    
    CONST string LASER_IP:="127.0.0.1";
    CONST num LASER_PORT:=12345;
    
    VAR string laser_request;
    VAR string laser_response;
    PERS num laser_x;
    PERS num laser_y;
    PERS num laser_z;
    PERS num laser_t;
    PERS string laser_response_out;
    
    PROC ExecuteMeasurementToLaser()
        
        laser_request:="[Measure] x:"+ValToStr(laser_x)+" y:"+ValToStr(laser_y)+" z:"+ValToStr(laser_z)+" t: "+ValToStr(laser_t)+" ms";
        SocketCreate laser_socket;
        SocketConnect laser_socket,LASER_IP,LASER_PORT;
        SocketSend laser_socket,\Str:=laser_request;
        SocketReceive laser_socket,\Str:=laser_response;
        SocketClose laser_socket;
        
        laser_response_out:=laser_response;
        
    ENDPROC
    
ENDMODULE